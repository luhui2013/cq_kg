<!DOCTYPE html><html lang="en" xmlns="http://www.w3.org/1999/xhtml"><head>    <meta charset="utf-8" />    <title>空轨信息</title>    <style>        body, div {            margin:0; padding:0;             font-family:'Adobe Fan Heiti Std'        }        td {            margin:0px;            padding:0px;            text-align:center;            line-height:20px;            font-size:16px;	    color:#FFFFFF;        }                .table_header td{            line-height:55px;        }    </style>    <script>        loadXML = function (xmlString) {            var xmlDoc = null;            if (!window.DOMParser && window.ActiveXObject) {                var xmlDomVersions = ['MSXML.2.DOMDocument.6.0', 'MSXML.2.DOMDocument.3.0', 'Microsoft.XMLDOM'];                for (var i = 0; i < xmlDomVersions.length; i++) {                    try {                        xmlDoc = new ActiveXObject(xmlDomVersions[i]);                        xmlDoc.async = false;                        xmlDoc.loadXML(xmlString); //loadXML方法载入xml字符串                        break;                    } catch (e) {                    }                }            }            else if (window.DOMParser && document.implementation && document.implementation.createDocument) {                try {                    domParser = new DOMParser();                    xmlDoc = domParser.parseFromString(xmlString, 'text/xml');                } catch (e) {                    alert("error");                }            }            else {                return null;            }            return xmlDoc;        }        var __debug = false;        var tableHeader = "<table style=\"width:100%;\">";        var tableItemHeader = "<tr class=\"table_header\"><td >{item1}</td><td>{item2}</td><td>{item3}</td><td>{item4}</td></tr>";        var tableItem = "<tr><td>{item1}</td><td>{item2}</td><td>{item3}</td><td>{item4}</td></tr>";        var tableFoot = "</table>";        var timer = -1;        var timerInterval = 4*1000;        var type1_list = [];        var type2_list = [];        var LIST_TYPE1 = "1";        var LIST_TYPE2 = "2";        var curList = null;        var pageSize = 6;        var pageCount = 0;        var pageIndex = 0;        var xml_data="<NewSourceFormat ><Table1 > <AviationCompany>卡塔尔航空</AviationCompany> <AviationCompanyNumber>QR</AviationCompanyNumber><FlightNumber>QR849</FlightNumber> <SectionStart_CH>重庆</SectionStart_CH> <Destination_CH>多哈</Destination_CH> <IntendPlayDateTime>2013/8/1 7:50:00</IntendPlayDateTime> <FactPlayDateTime>2013/8/1 1:10:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 7:50:00</IntendArriveDateTime> <FlightState>起飞</FlightState></Table1 ><Table1 > <AviationCompany>四川航空</AviationCompany> <AviationCompanyNumber>3U</AviationCompanyNumber><FlightNumber>3U8582</FlightNumber> <SectionStart_CH>重庆</SectionStart_CH> <Destination_CH>西安</Destination_CH> <IntendPlayDateTime>2013/8/1 0:00:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 0:00:00</IntendArriveDateTime> <FlightState></FlightState></Table1 ><Table1 > <AviationCompany>海南航空</AviationCompany> <AviationCompanyNumber>HU</AviationCompanyNumber><FlightNumber>HU7668</FlightNumber> <SectionStart_CH>重庆</SectionStart_CH> <Destination_CH>西安</Destination_CH> <IntendPlayDateTime>2013/8/1 0:00:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 0:00:00</IntendArriveDateTime> <FlightState>办票截止</FlightState></Table1 ><Table1 > <AviationCompany>中国东方航空</AviationCompany> <AviationCompanyNumber>MU</AviationCompanyNumber><FlightNumber>MU2304</FlightNumber> <SectionStart_CH>重庆</SectionStart_CH> <Destination_CH>西安</Destination_CH> <IntendPlayDateTime>2013/8/1 0:00:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 0:00:00</IntendArriveDateTime> <FlightState></FlightState></Table1 ><Table1 > <AviationCompany>深圳</AviationCompany> <AviationCompanyNumber>ZH</AviationCompanyNumber><FlightNumber>ZH9242</FlightNumber> <SectionStart_CH>重庆</SectionStart_CH> <Destination_CH>西安</Destination_CH> <IntendPlayDateTime>2013/8/1 0:00:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 0:00:00</IntendArriveDateTime> <FlightState></FlightState></Table1 ><Table1 > <AviationCompany>中国东方航空</AviationCompany> <AviationCompanyNumber>MU</AviationCompanyNumber><FlightNumber>MU2268</FlightNumber> <SectionStart_CH>重庆</SectionStart_CH> <Destination_CH>西安</Destination_CH> <IntendPlayDateTime>2013/8/1 0:00:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 0:00:00</IntendArriveDateTime> <FlightState>正在办票</FlightState></Table1 ><Table1 > <AviationCompany>中国东方航空</AviationCompany> <AviationCompanyNumber>MU</AviationCompanyNumber><FlightNumber>MU522</FlightNumber> <SectionStart_CH>重庆</SectionStart_CH> <Destination_CH>西安</Destination_CH> <IntendPlayDateTime>2013/8/1 0:00:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 0:00:00</IntendArriveDateTime> <FlightState>正在办票</FlightState></Table1 ><Table1 > <AviationCompany>国际</AviationCompany> <AviationCompanyNumber>CA</AviationCompanyNumber><FlightNumber>CA4146</FlightNumber> <SectionStart_CH>厦门</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 0:30:00</IntendPlayDateTime> <FactPlayDateTime>2013/7/31 22:58:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 0:30:00</IntendArriveDateTime> <FlightState>到达</FlightState></Table1 ><Table1 > <AviationCompany>四川航空</AviationCompany> <AviationCompanyNumber>3U</AviationCompanyNumber><FlightNumber>3U8664</FlightNumber> <SectionStart_CH>九寨沟</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 0:40:00</IntendPlayDateTime> <FactPlayDateTime>2013/7/31 23:23:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 0:40:00</IntendArriveDateTime> <FlightState>到达</FlightState></Table1 ><Table1 > <AviationCompany>四川航空</AviationCompany> <AviationCompanyNumber>3U</AviationCompanyNumber><FlightNumber>3U8676</FlightNumber> <SectionStart_CH>九寨沟</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 0:55:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 0:55:00</IntendArriveDateTime> <FlightState></FlightState></Table1 ><Table1 > <AviationCompany>西部航空</AviationCompany> <AviationCompanyNumber>PN</AviationCompanyNumber><FlightNumber>PN6214</FlightNumber> <SectionStart_CH>三亚</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 0:55:00</IntendPlayDateTime> <FactPlayDateTime>2013/7/31 23:06:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 0:55:00</IntendArriveDateTime> <FlightState>到达</FlightState></Table1 ><Table1 > <AviationCompany>西部航空</AviationCompany> <AviationCompanyNumber>PN</AviationCompanyNumber><FlightNumber>PN6232</FlightNumber> <SectionStart_CH>厦门</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 0:55:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 0:55:00</IntendArriveDateTime> <FlightState>前方起飞</FlightState></Table1 ><Table1 > <AviationCompany>四川航空</AviationCompany> <AviationCompanyNumber>3U</AviationCompanyNumber><FlightNumber>3U8582</FlightNumber> <SectionStart_CH>乌鲁木齐</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:00:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:00:00</IntendArriveDateTime> <FlightState>到达</FlightState></Table1 ><Table1 > <AviationCompany>海南航空</AviationCompany> <AviationCompanyNumber>HU</AviationCompanyNumber><FlightNumber>HU7668</FlightNumber> <SectionStart_CH>西安</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:00:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:00:00</IntendArriveDateTime> <FlightState>到达</FlightState></Table1 ><Table1 > <AviationCompany>中国东方航空</AviationCompany> <AviationCompanyNumber>MU</AviationCompanyNumber><FlightNumber>MU2304</FlightNumber> <SectionStart_CH>广州</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:00:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:00:00</IntendArriveDateTime> <FlightState>到达</FlightState></Table1 ><Table1 > <AviationCompany>深圳</AviationCompany> <AviationCompanyNumber>ZH</AviationCompanyNumber><FlightNumber>ZH9242</FlightNumber> <SectionStart_CH>深圳</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:00:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:00:00</IntendArriveDateTime> <FlightState>到达</FlightState></Table1 ><Table1 > <AviationCompany>重庆航空</AviationCompany> <AviationCompanyNumber>OQ</AviationCompanyNumber><FlightNumber>OQ2384</FlightNumber> <SectionStart_CH>九寨沟</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:05:00</IntendPlayDateTime> <FactPlayDateTime>2013/7/31 23:42:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:05:00</IntendArriveDateTime> <FlightState>到达</FlightState></Table1 ><Table1 > <AviationCompany>西部航空</AviationCompany> <AviationCompanyNumber>PN</AviationCompanyNumber><FlightNumber>PN6222</FlightNumber> <SectionStart_CH>西安</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:05:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:05:00</IntendArriveDateTime> <FlightState></FlightState></Table1 ><Table1 > <AviationCompany>中国东方航空</AviationCompany> <AviationCompanyNumber>MU</AviationCompanyNumber><FlightNumber>MU2268</FlightNumber> <SectionStart_CH>西安</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:20:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:20:00</IntendArriveDateTime> <FlightState>到达</FlightState></Table1 ><Table1 > <AviationCompany>西部航空</AviationCompany> <AviationCompanyNumber>PN</AviationCompanyNumber><FlightNumber>PN6236</FlightNumber> <SectionStart_CH>温州</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:25:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:25:00</IntendArriveDateTime> <FlightState>前方起飞</FlightState></Table1 ><Table1 > <AviationCompany>西部航空</AviationCompany> <AviationCompanyNumber>PN</AviationCompanyNumber><FlightNumber>PN6206</FlightNumber> <SectionStart_CH>广州</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:35:00</IntendPlayDateTime> <FactPlayDateTime>2013/8/1 0:47:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:35:00</IntendArriveDateTime> <FlightState>前方起飞</FlightState></Table1 ><Table1 > <AviationCompany>中国东方航空</AviationCompany> <AviationCompanyNumber>MU</AviationCompanyNumber><FlightNumber>MU522</FlightNumber> <SectionStart_CH>上海浦东</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:40:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:40:00</IntendArriveDateTime> <FlightState>前方起飞</FlightState></Table1 ><Table1 > <AviationCompany>西部航空</AviationCompany> <AviationCompanyNumber>PN</AviationCompanyNumber><FlightNumber>PN6230</FlightNumber> <SectionStart_CH>深圳</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:40:00</IntendPlayDateTime> <FactPlayDateTime>2013/8/1 0:23:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:40:00</IntendArriveDateTime> <FlightState>前方起飞</FlightState></Table1 ><Table1 > <AviationCompany>中国东方航空</AviationCompany> <AviationCompanyNumber>MU</AviationCompanyNumber><FlightNumber>MU2296</FlightNumber> <SectionStart_CH>哈尔滨</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:50:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:50:00</IntendArriveDateTime> <FlightState></FlightState></Table1 ><Table1 > <AviationCompany>西部航空</AviationCompany> <AviationCompanyNumber>PN</AviationCompanyNumber><FlightNumber>PN6268</FlightNumber> <SectionStart_CH>大连</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:55:00</IntendPlayDateTime> <FactPlayDateTime>0001/1/1 0:00:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:55:00</IntendArriveDateTime> <FlightState>前方起飞</FlightState></Table1 ><Table1 > <AviationCompany>西部航空</AviationCompany> <AviationCompanyNumber>PN</AviationCompanyNumber><FlightNumber>PN6264</FlightNumber> <SectionStart_CH>珠海</SectionStart_CH> <Destination_CH>重庆</Destination_CH> <IntendPlayDateTime>2013/8/1 1:55:00</IntendPlayDateTime> <FactPlayDateTime>2013/8/1 0:23:00</FactPlayDateTime> <IntendArriveDateTime>2013/8/1 1:55:00</IntendArriveDateTime> <FlightState>前方起飞</FlightState></Table1 ></NewSourceFormat >";                 function loadData(xml) {		    getValue=function(nodeList){		     		        if (nodeList.length > 0) {
		            if (nodeList[0].firstChild) {
		                return nodeList[0].firstChild.nodeValue;
		            }
		        }				return "";			}		               addType1Node = function (list,element) {                var flightNumber = getValue(element.getElementsByTagName("FlightNumber"));                var destination = getValue(element.getElementsByTagName("Destination_CH"));                                var departureTime = getValue(element.getElementsByTagName("IntendPlayDateTime"));                                var dateTime = departureTime.split(" ");                if (dateTime.length == 2) departureTime = dateTime[1];                                var flightStatus = getValue(element.getElementsByTagName("FlightState"));                //alert(flightNumber);                                                list.push({ "flightNumber": flightNumber, "destination": destination, "departureTime": departureTime, "flightStatus": flightStatus });            }            addType2Node = function (list,element) {                var flightNumber = getValue(element.getElementsByTagName("FlightNumber"));                var startaddress = getValue(element.getElementsByTagName("SectionStart_CH"));                var arrivalTime = getValue(element.getElementsByTagName("IntendArriveDateTime"));                var dateTime = arrivalTime.split(" ");                if (dateTime.length == 2) arrivalTime = dateTime[1];                                var flightStatus = getValue(element.getElementsByTagName("FlightState"));                               //alert(flightNumber);                list.push({ "flightNumber": flightNumber, "startaddress": startaddress, "arrivalTime": arrivalTime, "flightStatus": flightStatus });            }            var xmldoc = loadXML(xml);                        if (xmldoc) {                clearData();                var elements = xmldoc.getElementsByTagName("Table1");                for (var i = 0; i < elements.length; i++) {                    var node = elements[i];                    var type = node.getElementsByTagName("SectionStart_CH")[0].firstChild.nodeValue;                    alert(i + type);                    if (type == "重庆") {                        addType1Node(type1_list, node);                    } else {                        addType2Node(type2_list,node);                                           }                }                var type1_list_len = type1_list.length;                var type2_list_len = type2_list.length;                               if (type1_list_len == 0 && type2_list_len == 0) return;                if (type1_list_len != 0) {                    curList = type1_list;                } else {                    curList = type2_list;                }                pageIndex = 0;                pageCount = Math.ceil(curList.length/pageSize);                showPage();                timer = setInterval(showPage, timerInterval);            }                   }        function clearData() {            if (timer != -1) {                clearInterval(timer);                timer = -1;            }            type1_list = [];            type2_list = [];        }        function showPage() {            var type = LIST_TYPE1;            if (curList == type2_list) {                type = LIST_TYPE2;            }            var len = curList.length;            var pos = pageIndex * pageSize;            var pageData = [];            for (var i = pos; i < pos + pageSize; i++) {                if (i >= len) break;                pageData.push(curList[i]);            }            buildView(type,pageData);            if (__debug)                showDebug("pageCount:" + pageCount + " pageIndex:" + pageIndex + " type:" + type);            pageIndex++;                        if (pageIndex >= pageCount) {                if (curList == type1_list) {                    if (type2_list.length > 0) {                        curList = type2_list;                    }                } else if (curList == type2_list) {                    if (type1_list.length > 0) {                        curList = type1_list;                    }                } else { }                pageIndex = 0;                pageCount = Math.ceil(curList.length / pageSize);            }        }        function buildView(type,pageData) {            var str = tableHeader;            if (type == LIST_TYPE1) {                str += tableItemHeader.replace("{item1}", "航班号").replace("{item2}", "目的地").replace("{item3}", "预计离港").replace("{item4}", "航班状态");            } else {                str += tableItemHeader.replace("{item1}", "航班号").replace("{item2}", "出发地").replace("{item3}", "预计到港").replace("{item4}", "航班状态");            }            var len = pageData.length;            for (var i = 0; i < len; i++) {                var item = pageData[i];                if (type == LIST_TYPE1) {                    str += tableItem.replace("{item1}", item["flightNumber"]).replace("{item2}", item["destination"]).replace("{item3}", item["departureTime"]).replace("{item4}", item["flightStatus"]);                } else {                    str += tableItem.replace("{item1}", item["flightNumber"]).replace("{item2}", item["startaddress"]).replace("{item3}", item["arrivalTime"]).replace("{item4}", item["flightStatus"]);                }            }            str += tableFoot;            var view = document.getElementById("table_view");            view.innerHTML = str;        }        function showDebug(msg) {            var div = document.getElementById("div_debug");            div.innerText = msg;        }            </script></head><body>       <div id="table_view">    </div>    <br />     <div id="div_debug" style="color:red">    </div>    <script>loadData(xml_data);</script></body></html>